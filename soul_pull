#!/bin/bash

echo "ğŸ”® Starting Soul Pull Ritual..."

# Load .env variables
if [ -f .env ]; then
    echo "ğŸ“¦ Loading environment variables from .env..."
    export $(grep -v '^#' .env | xargs)
else
    echo "âš ï¸  .env file not found. Aborting."
    exit 1
fi

# Set local redirect URI for development
export SPOTIPY_REDIRECT_URI="http://127.0.0.1:8889/callback"

# Copy to clipboard
echo "$SPOTIPY_REDIRECT_URI" | pbcopy
echo "ğŸ“‹ Copied local redirect URI to clipboard:"
echo "   $SPOTIPY_REDIRECT_URI"

# Reference production URI
echo "ğŸŒ Production Redirect (for GitHub Pages):"
echo "   https://jackiedaytona666.github.io/spotify-auth-test/callback.html"

# Launch Flask
echo "ğŸ§¿ Step 1: Starting Flask server on port 8889..."
export FLASK_APP=server.py
export FLASK_ENV=development
flask run --port=8889
